# 処理過程 解説

## 1. ROSノード(プログラム)が起動したら、以下の情報を文字列結合し**sha224**アルゴリズムでハッシュ化する
* robot_id: ロボットの識別ID
* now: 現在時刻 %Y-%m-%d %H:%M:%S
* location: ロボットの現在の 経度, 緯度
* pos: ロボットの現在の x, y, z, θ

```
結合した文字列の例： robot_01,2020-06-12 11:42:00,0.0_0.0,0.0_0.0_0.0_0.0
ハッシュ化した文字列の例： bc5ed4ed5a36def9895db455718f11c1835456f81a27545524197cd1
```


## 2. 360度カメラで取得した画像にハッシュ化した文字列と結合した文字列を埋め込み、watermark画像を出力、保存
* 360度カメラとの接続は未検証のため、現在はローカルに保存してある画像を対象とする
* 設定で指定したサイズでリサイズしてからwatermark画像を出力する(サイズが大きいと処理時間が長くなるため)
* ファイル名は uuid4によるユニークな名前を設定する(脅威が発生した際に後から画像を追えるようにしたい)
* Insert only DB(Orion経由のCygnus -> PostgresDB)に 画像ファイルのハッシュ値とファイルパスをセットで保存する
* 画像本体の保存先はクラウド上のストレージ(Azure Blob Storage)を想定する(現在はローカルに保存)

![3c928464-5748-44ad-b4d2-fa653363e218](https://user-images.githubusercontent.com/6661165/84484604-f2382a00-acd5-11ea-9db9-ab77297b79ce.png)

## 3. 数秒に一回 1, 2を繰り返す
* watermark画像の出力速度にも依存する
